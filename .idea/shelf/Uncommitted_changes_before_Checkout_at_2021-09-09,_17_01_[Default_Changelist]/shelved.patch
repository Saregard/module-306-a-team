Index: app/src/main/java/se/linerotech/quizkampen/CreateAccount.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package se.linerotech.quizkampen\n\nimport android.content.Intent\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.Toast\nimport com.google.firebase.auth.FirebaseAuth\nimport com.google.firebase.auth.ktx.auth\nimport com.google.firebase.ktx.Firebase\n\nclass CreateAccount : AppCompatActivity() {\n    private var mySignUpButton: Button? = null\n    private var myPassword: EditText? = null\n    private var myEmail: EditText? = null\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_create_account)\n        mySignUpButton = findViewById(R.id.buttonSignUp)\n        myPassword = findViewById(R.id.editTextSignUpPassword)\n        myEmail = findViewById(R.id.editTextSignUpEmail)\n        val auth = Firebase.auth\n\n        mySignUpButton?.setOnClickListener{\n            Toast.makeText(this, myEmail?.text.toString(), Toast.LENGTH_SHORT).show()\n\n            auth.createUserWithEmailAndPassword(myEmail?.text.toString(), myPassword?.text.toString())\n                .addOnCompleteListener(this) { task ->\n                    Toast.makeText(this, \"Success create\", Toast.LENGTH_SHORT).show()\n                    if (task.isSuccessful) {\n                        // Sign in success, update UI with the signed-in user's information\n                        auth.currentUser!!.sendEmailVerification()\n\n                        val intent = Intent(this, LoginPage::class.java)\n                        Log.d(\"Sign in\", \"createUserWithEmail:success\")\n                        startActivity(intent)\n                        finish()\n\n\n                    } else {\n                        // If sign in fails, display a message to the user.\n                        Log.w(\"Failed\", \"createUserWithEmail:failure\", task.exception)\n                        Toast.makeText(baseContext, \"Authentication failed.\",\n                            Toast.LENGTH_SHORT).show()\n\n                    }\n                }\n\n        }\n\n\n    }\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/se/linerotech/quizkampen/CreateAccount.kt	(revision ef2a86d1f11cbe262a9af31c989a986d86aeeb9e)
+++ app/src/main/java/se/linerotech/quizkampen/CreateAccount.kt	(date 1631199685825)
@@ -33,8 +33,9 @@
                     Toast.makeText(this, "Success create", Toast.LENGTH_SHORT).show()
                     if (task.isSuccessful) {
                         // Sign in success, update UI with the signed-in user's information
-                        auth.currentUser!!.sendEmailVerification()
-
+                        if (!auth.currentUser!!.isEmailVerified) {
+                            auth.currentUser!!.sendEmailVerification()
+                        }
                         val intent = Intent(this, LoginPage::class.java)
                         Log.d("Sign in", "createUserWithEmail:success")
                         startActivity(intent)
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.3\"\n\n    defaultConfig {\n        applicationId \"com.example.quizkampen\"\n        minSdkVersion 28\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n}\n\ndependencies {\n\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    implementation 'androidx.core:core-ktx:1.6.0'\n    implementation 'androidx.appcompat:appcompat:1.3.1'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.0'\n    implementation 'com.google.firebase:firebase-auth-ktx:21.0.1'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision ef2a86d1f11cbe262a9af31c989a986d86aeeb9e)
+++ app/build.gradle	(date 1631199700558)
@@ -41,6 +41,7 @@
     implementation 'com.google.android.material:material:1.4.0'
     implementation 'androidx.constraintlayout:constraintlayout:2.1.0'
     implementation 'com.google.firebase:firebase-auth-ktx:21.0.1'
+    implementation 'com.google.firebase:firebase-firestore-ktx:23.0.3'
     testImplementation 'junit:junit:4.13.2'
     androidTestImplementation 'androidx.test.ext:junit:1.1.3'
     androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'
